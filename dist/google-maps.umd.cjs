(function(v,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],g):(v=typeof globalThis<"u"?globalThis:v||self,g(v.GoogleMaps={},v.Vue))})(this,function(v,g){"use strict";var X=document.createElement("style");X.textContent=`.vue-map-container{position:relative;width:100%;height:100%}.vue-map{border-radius:12px}.vue-map-container .vue-map{left:0;right:0;top:0;bottom:0;position:absolute}.vue-map-hidden{display:none}a[href^="http://maps.google.com/maps"],a[href^="https://maps.google.com/maps"],a[title="Report problems with Street View imagery to Google"] .gmnoprint a,.gmnoprint span,.gm-style-cc{display:none!important}
`,document.head.appendChild(X);const Q=(t,e,s)=>{for(const r of s)(t.$googleMapsOptions.autobindAllEvents||t.$attrs[r])&&e.addListener(r,i=>{t.$emit(r,i)})};function ee(t,e,s,r=!1){let i=!1;function n(){i||(i=!0,t.$nextTick(()=>{i=!1,s()}))}for(const o of e)t.$watch(o,n,{immediate:r})}function te(t){return t.charAt(0).toUpperCase()+t.slice(1)}function z(t,e){return Object.keys(e).reduce((s,r)=>(t[r]!==void 0&&(s[r]=t[r]),s),{})}function T(t,e,s){for(const r in s){const{twoWay:i,type:n,trackProperties:o,noBind:l}=s[r];if(l)continue;const a=`set${te(r)}`,u=`get${te(r)}`,d=`${r.toLowerCase()}_changed`,h=t[r];if(typeof e[a]>"u")throw new Error(`${a} is not a method of (the Maps object corresponding to) ${t.$options._componentTag}`);n!==Object||!o?t.$watch(r,()=>{const p=t[r];e[a](p)},{immediate:typeof h<"u",deep:n===Object}):ee(t,o.map(p=>`${r}.${p}`),()=>{e[a](t[r])},t[r]!==void 0),i&&(t.$googleMapsOptions.autoBindAllEvents||t.$attrs[d])&&e.addListener(d,()=>{t.$emit(d,e[u]())})}}function R(t){return Object.entries(t).map(([e,s])=>{const r={};return"type"in s&&(r.type=s.type),"default"in s&&(r.default=s.default),"required"in s&&(r.required=s.required),[e,r]}).reduce((e,[s,r])=>(e[s]=r,e),{})}const se={inject:{$mapPromise:{default:"abcdef"}},provide(){return this.$mapPromise.then(t=>{this.$map=t}),{}}};function Pe(t,e){if(!t)throw new Error(e)}function L(t){const{mappedProps:e,name:s,ctr:r,ctrArgs:i,emits:n,events:o,beforeCreate:l,afterCreate:a,props:u,...d}=t,h=`$${s}Promise`,p=`$${s}Object`;return Pe(!(d.props instanceof Array),"`props` should be an object, not Array"),{mixins:[se],emits:n??[],props:{...u,...R(e)},render(){return""},provide(){const f=this.$mapPromise.then(m=>{this.$map=m;const _={...this.options,map:m,...z(this,e)},{options:y,...w}=_;if(l){const M=l.bind(this)(w);if(M instanceof Promise)return M.then(()=>({options:w}))}return{options:w}}).then(({options:m})=>{const _=r();return this[p]=i?new(Function.prototype.bind.call(_,null,...i(m,z(this,u||{})))):new _(m),T(this,this[p],e),Q(this,this[p],o),a&&a.bind(this)(this[p]),this[p]});return this[h]=f,{[h]:f}},destroyed(){var f;(f=this[p])!=null&&f.setMap&&this[p].setMap(null)},...d}}const Z=(t,e)=>{const s=t.__vccOpts||t;for(const[r,i]of e)s[r]=i;return s},Le={options:{type:Object,required:!1,default:()=>({})},position:{type:Object,twoWay:!0},zIndex:{type:Number,twoWay:!0}},re=["domready","click","closeclick","content_changed","position_changed","click-outside"],Ae=L({name:"InfoWindow",mappedProps:Le,events:re,emits:[...re],ctr:()=>typeof window<"u"&&window.google.maps.InfoWindow,props:{opened:{type:Boolean,default:!0}},mounted(){if(typeof window<"u"){const t=this.$refs.flyaway;t.parentNode.removeChild(t),window.addEventListener("click",this.listener)}},beforeCreate(t){t.content=this.$refs.flyaway},beforeUnmount(){typeof window<"u"&&window.removeEventListener("click",this.listener)},methods:{_openInfoWindow(){this.opened?this.$InfoWindowObject.open(this.$map):this.$InfoWindowObject.close()},listener(t){this.$InfoWindowObject.content.contains(t.target)||this.$emit("click-outside",t)}},afterCreate(){this._openInfoWindow(),this.$watch("opened",()=>{this._openInfoWindow()})}}),Se={ref:"flyaway"};function je(t,e,s,r,i,n){return g.openBlock(),g.createElementBlock("div",null,[g.createElementVNode("div",Se,[g.renderSlot(t.$slots,"default")],512)])}const ie=Z(Ae,[["render",je]]),ne={props:["resizeBus"],data(){return{_actualResizeBus:null}},created(){typeof this.resizeBus>"u"?this.$data._actualResizeBus=this.$googleMapsDefaultResizeBus:this.$data._actualResizeBus=this.resizeBus},methods:{_resizeCallback(){this.resize()},_delayedResizeCallback(){this.$nextTick(()=>this._resizeCallback())}},watch:{resizeBus(t){this.$data._actualResizeBus=t},"$data._actualResizeBus":function(e,s){}},destroyed(){this.$data._actualResizeBus&&this.$data._actualResizeBus.$off("resize",this._delayedResizeCallback)}};function ze(t){let e=0;t(()=>{e+=1},()=>{e=Math.max(0,e-1)},()=>e===0)}const W={center:{type:Object,required:!0,twoWay:!0,noBind:!0},zoom:{type:Number,required:!1,twoWay:!0,noBind:!0},heading:{type:Number,twoWay:!0},mapTypeId:{type:String,twoWay:!0},tilt:{type:Number,twoWay:!0},options:{type:Object,default:()=>({})}},oe=["bounds_changed","click","dblclick","drag","dragend","dragstart","idle","mousemove","mouseout","mouseover","resize","rightclick","tilesloaded","renderingtype_changed"],Ie=["panBy","panTo","panToBounds","fitBounds"].reduce((t,e)=>(t[e]=(...s)=>{(void 0).$mapObject&&(void 0).$mapObject[e].apply((void 0).$mapObject,s)},t),{}),Be={resize(){typeof window<"u"&&this.$mapObject&&window.google.maps.event.trigger(this.$mapObject,"resize")},resizePreserveCenter(){if(typeof window>"u"||!this.$mapObject)return;const t=this.$mapObject.getCenter();window.google.maps.event.trigger(this.$mapObject,"resize"),this.$mapObject.setCenter(t)},_resizeCallback(){this.resizePreserveCenter()}},ae="__gmc__",Te={name:"MapComponent",emits:[...oe,"center_changed","contextmenu","heading_changed","isfractionalzoomenabled_changed","maptypeid_changed","projection_changed","renderingtype_changed","tilesloaded","tilt_changed","zoom_changed","animation_changed"],mixins:[ne],props:R(W),provide(){return this.$mapPromise=new Promise((t,e)=>{this.$mapPromiseDeferred={resolve:t,reject:e}}),{$mapPromise:this.$mapPromise}},computed:{finalLat(){return this.center&&typeof this.center.lat=="function"?this.center.lat():this.center.lat},finalLng(){return this.center&&typeof this.center.lng=="function"?this.center.lng():this.center.lng},finalLatLng(){return{lat:this.finalLat,lng:this.finalLng}}},watch:{zoom(t){this.$mapObject&&this.$mapObject.setZoom(t)}},beforeUnmount(){const t=this.getRecycleKey();typeof window<"u"&&window[t]&&this.$mapObject&&(window[t].div=this.$mapObject.getDiv())},async mounted(){await this.$googleMapsApiPromiseLazy();const t=this.$refs["vue-map"],e={...this.options,...z(this,W)},{options:s,...r}=e,i=this.getRecycleKey();return this.options.recycle&&window[i]?(t.appendChild(window[i].div),this.$mapObject=window[i].map,this.$mapObject.setOptions(r)):(this.$mapObject=new window.google.maps.Map(t,r),window[i]={map:this.$mapObject}),T(this,this.$mapObject,W),Q(this,this.$mapObject,oe),ze((n,o,l)=>{this.$mapObject.addListener("center_changed",()=>{l()&&this.$emit("center_changed",this.$mapObject.getCenter()),o()}),ee(this,["finalLat","finalLng"],()=>{n(),this.$mapObject.setCenter(this.finalLatLng)})}),this.$mapObject.addListener("zoom_changed",()=>{this.$emit("zoom_changed",this.$mapObject.getZoom())}),this.$mapObject.addListener("bounds_changed",()=>{this.$emit("bounds_changed",this.$mapObject.getBounds())}),this.$mapPromiseDeferred.resolve(this.$mapObject),this.$mapObject},methods:{...Be,...Ie,getRecycleKey(){return this.options.recycle?ae+this.options.recycle:ae}}},Re={class:"vue-map-container"},Ze={ref:"vue-map",class:"vue-map"},We={class:"vue-map-hidden"};function Ne(t,e,s,r,i,n){return g.openBlock(),g.createElementBlock("div",Re,[g.createElementVNode("div",Ze,null,512),g.createElementVNode("div",We,[g.renderSlot(t.$slots,"default")]),g.renderSlot(t.$slots,"visible")])}const le=Z(Te,[["render",Ne]]),De={draggable:{type:Boolean},editable:{type:Boolean},options:{type:Object},path:{type:Array,twoWay:!0,noBind:!0},paths:{type:Array,twoWay:!0,noBind:!0}},ce=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],he=L({name:"Polygon",props:{deepWatch:{type:Boolean,default:!1}},events:ce,emits:[...ce,"paths_changed","path_changed"],mappedProps:De,ctr:()=>typeof window<"u"&&window.google.maps.Polygon,beforeCreate(t){t.path||delete t.path,t.paths||delete t.paths},afterCreate(t){let e=()=>{};this.$watch("paths",s=>{if(s){e(),t.setPaths(s);const r=()=>{this.$emit("paths_changed",t.getPaths())},i=[],n=t.getPaths();for(let o=0;o<n.getLength();o+=1){const l=n.getAt(o);i.push([l,l.addListener("insert_at",r)]),i.push([l,l.addListener("remove_at",r)]),i.push([l,l.addListener("set_at",r)])}i.push([n,n.addListener("insert_at",r)]),i.push([n,n.addListener("remove_at",r)]),i.push([n,n.addListener("set_at",r)]),e=()=>{i.forEach(([o,l])=>window.google.maps.event.removeListener(l))}}},{deep:this.deepWatch,immediate:!0}),this.$watch("path",s=>{if(s){e(),t.setPaths(s);const r=t.getPath(),i=[],n=()=>{this.$emit("path_changed",t.getPath())};i.push([r,r.addListener("insert_at",n)]),i.push([r,r.addListener("remove_at",n)]),i.push([r,r.addListener("set_at",n)]),e=()=>{i.forEach(([o,l])=>window.google.maps.event.removeListener(l))}}},{deep:this.deepWatch,immediate:!0})}}),Fe={animation:{twoWay:!0,type:Number},attribution:{type:Object},clickable:{type:Boolean,twoWay:!0,default:!0},cursor:{type:String,twoWay:!0},draggable:{type:Boolean,twoWay:!0,default:!1},icon:{twoWay:!0},label:{},opacity:{type:Number,default:1},options:{type:Object},place:{type:Object},position:{type:Object,twoWay:!0},shape:{type:Object,twoWay:!0},title:{type:String,twoWay:!0},zIndex:{type:Number,twoWay:!0},visible:{twoWay:!0,default:!0}},ue=["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],de=L({name:"Marker",mappedProps:Fe,emits:[...ue,"position_changed","animation_changed","clickable_changed","contextmenu","cursor_changed","draggable_changed","flat_changed","icon_changed","shape_changed","title_changed","visible_changed","zindex_changed"],events:ue,ctr:()=>typeof window<"u"&&window.google.maps.Marker,inject:{$MarkerClusterPromise:{default:null}},render(){return!this.$slots.default||this.$slots.default().length===0?"":this.$slots.default().length===1?this.$slots.default()[0]:g.h("div",null,{default:()=>this.$slots.default()})},destroyed(){this.$MarkerObject&&(this.$MarkerClusterObject?this.$MarkerClusterObject.removeMarker(this.$MarkerObject,!0):this.$MarkerObject.setMap(null))},beforeCreate(t){return this.$MarkerClusterPromise&&(t.map=null),this.$MarkerClusterPromise},afterCreate(t){this.$MarkerClusterPromise&&this.$MarkerClusterPromise.then(e=>{e.addMarker(t),this.$MarkerClusterObject=e})}});function pe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ue=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var r,i,n;if(Array.isArray(e)){if(r=e.length,r!=s.length)return!1;for(i=r;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(n=Object.keys(e),r=n.length,r!==Object.keys(s).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,n[i]))return!1;for(i=r;i--!==0;){var o=n[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s};const fe=pe(Ue),ge=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],N=1,A=8;class D{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,r]=new Uint8Array(e,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(i!==N)throw new Error(`Got v${i} data when expected v${N}.`);const n=ge[r&15];if(!n)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new D(l,o,n,e)}constructor(e,s=64,r=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const n=ge.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-l%8)%8;if(n<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,A,e),this.coords=new this.ArrayType(this.data,A+l+a,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(A+o+l+a),this.ids=new this.IndexArrayType(this.data,A,e),this.coords=new this.ArrayType(this.data,A+l+a,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(N<<4)+n]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=e)}add(e,s){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=s,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return F(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,s,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:l}=this,a=[0,n.length-1,0],u=[];for(;a.length;){const d=a.pop()||0,h=a.pop()||0,p=a.pop()||0;if(h-p<=l){for(let y=p;y<=h;y++){const w=o[2*y],M=o[2*y+1];w>=e&&w<=r&&M>=s&&M<=i&&u.push(n[y])}continue}const f=p+h>>1,m=o[2*f],_=o[2*f+1];m>=e&&m<=r&&_>=s&&_<=i&&u.push(n[f]),(d===0?e<=m:s<=_)&&(a.push(p),a.push(f-1),a.push(1-d)),(d===0?r>=m:i>=_)&&(a.push(f+1),a.push(h),a.push(1-d))}return u}within(e,s,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:n,nodeSize:o}=this,l=[0,i.length-1,0],a=[],u=r*r;for(;l.length;){const d=l.pop()||0,h=l.pop()||0,p=l.pop()||0;if(h-p<=o){for(let y=p;y<=h;y++)_e(n[2*y],n[2*y+1],e,s)<=u&&a.push(i[y]);continue}const f=p+h>>1,m=n[2*f],_=n[2*f+1];_e(m,_,e,s)<=u&&a.push(i[f]),(d===0?e-r<=m:s-r<=_)&&(l.push(p),l.push(f-1),l.push(1-d)),(d===0?e+r>=m:s+r>=_)&&(l.push(f+1),l.push(h),l.push(1-d))}return a}}function F(t,e,s,r,i,n){if(i-r<=s)return;const o=r+i>>1;me(t,e,o,r,i,n),F(t,e,s,r,o-1,1-n),F(t,e,s,o+1,i,1-n)}function me(t,e,s,r,i,n){for(;i>r;){if(i-r>600){const u=i-r+1,d=s-r+1,h=Math.log(u),p=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),m=Math.max(r,Math.floor(s-d*p/u+f)),_=Math.min(i,Math.floor(s+(u-d)*p/u+f));me(t,e,s,m,_,n)}const o=e[2*s+n];let l=r,a=i;for(S(t,e,r,s),e[2*i+n]>o&&S(t,e,r,i);l<a;){for(S(t,e,l,a),l++,a--;e[2*l+n]<o;)l++;for(;e[2*a+n]>o;)a--}e[2*r+n]===o?S(t,e,r,a):(a++,S(t,e,a,i)),a<=s&&(r=a+1),s<=a&&(i=a-1)}}function S(t,e,s,r){U(t,s,r),U(e,2*s,2*r),U(e,2*s+1,2*r+1)}function U(t,e,s){const r=t[e];t[e]=t[s],t[s]=r}function _e(t,e,s,r){const i=t-s,n=e-r;return i*i+n*n}const Ge={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},ye=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),E=2,$=3,G=4,O=5,we=6;class Ve{constructor(e){this.options=Object.assign(Object.create(Ge),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:s,minZoom:r,maxZoom:i}=this.options;s&&console.time("total time");const n=`prepare ${e.length} points`;s&&console.time(n),this.points=e;const o=[];for(let a=0;a<e.length;a++){const u=e[a];if(!u.geometry)continue;const[d,h]=u.geometry.coordinates,p=ye(I(d)),f=ye(B(h));o.push(p,f,1/0,a,-1,1),this.options.reduce&&o.push(0)}let l=this.trees[i+1]=this._createTree(o);s&&console.timeEnd(n);for(let a=i;a>=r;a--){const u=+Date.now();l=this.trees[a]=this._createTree(this._cluster(l,a)),s&&console.log("z%d: %d clusters in %dms",a,l.numItems,+Date.now()-u)}return s&&console.timeEnd("total time"),this}getClusters(e,s){let r=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let n=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,n=180;else if(r>n){const h=this.getClusters([r,i,180,o],s),p=this.getClusters([-180,i,n,o],s);return h.concat(p)}const l=this.trees[this._limitZoom(s)],a=l.range(I(r),B(o),I(n),B(i)),u=l.data,d=[];for(const h of a){const p=this.stride*h;d.push(u[p+O]>1?ve(u,p,this.clusterProps):this.points[u[p+$]])}return d}getChildren(e){const s=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);const o=n.data;if(s*this.stride>=o.length)throw new Error(i);const l=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=o[s*this.stride],u=o[s*this.stride+1],d=n.within(a,u,l),h=[];for(const p of d){const f=p*this.stride;o[f+G]===e&&h.push(o[f+O]>1?ve(o,f,this.clusterProps):this.points[o[f+$]])}if(h.length===0)throw new Error(i);return h}getLeaves(e,s,r){s=s||10,r=r||0;const i=[];return this._appendLeaves(i,e,s,r,0),i}getTile(e,s,r){const i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:o,radius:l}=this.options,a=l/o,u=(r-a)/n,d=(r+1+a)/n,h={features:[]};return this._addTileFeatures(i.range((s-a)/n,u,(s+1+a)/n,d),i.data,s,r,n,h),s===0&&this._addTileFeatures(i.range(1-a/n,u,1,d),i.data,n,r,n,h),s===n-1&&this._addTileFeatures(i.range(0,u,a/n,d),i.data,-1,r,n,h),h.features.length?h:null}getClusterExpansionZoom(e){let s=this._getOriginZoom(e)-1;for(;s<=this.options.maxZoom;){const r=this.getChildren(e);if(s++,r.length!==1)break;e=r[0].properties.cluster_id}return s}_appendLeaves(e,s,r,i,n){const o=this.getChildren(s);for(const l of o){const a=l.properties;if(a&&a.cluster?n+a.point_count<=i?n+=a.point_count:n=this._appendLeaves(e,a.cluster_id,r,i,n):n<i?n++:e.push(l),e.length===r)break}return n}_createTree(e){const s=new D(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let r=0;r<e.length;r+=this.stride)s.add(e[r],e[r+1]);return s.finish(),s.data=e,s}_addTileFeatures(e,s,r,i,n,o){for(const l of e){const a=l*this.stride,u=s[a+O]>1;let d,h,p;if(u)d=Me(s,a,this.clusterProps),h=s[a],p=s[a+1];else{const _=this.points[s[a+$]];d=_.properties;const[y,w]=_.geometry.coordinates;h=I(y),p=B(w)}const f={type:1,geometry:[[Math.round(this.options.extent*(h*n-r)),Math.round(this.options.extent*(p*n-i))]],tags:d};let m;u||this.options.generateId?m=s[a+$]:m=this.points[s[a+$]].id,m!==void 0&&(f.id=m),o.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,s){const{radius:r,extent:i,reduce:n,minPoints:o}=this.options,l=r/(i*Math.pow(2,s)),a=e.data,u=[],d=this.stride;for(let h=0;h<a.length;h+=d){if(a[h+E]<=s)continue;a[h+E]=s;const p=a[h],f=a[h+1],m=e.within(a[h],a[h+1],l),_=a[h+O];let y=_;for(const w of m){const M=w*d;a[M+E]>s&&(y+=a[M+O])}if(y>_&&y>=o){let w=p*_,M=f*_,x,xe=-1;const J=((h/d|0)<<5)+(s+1)+this.points.length;for(const _t of m){const P=_t*d;if(a[P+E]<=s)continue;a[P+E]=s;const Ee=a[P+O];w+=a[P]*Ee,M+=a[P+1]*Ee,a[P+G]=J,n&&(x||(x=this._map(a,h,!0),xe=this.clusterProps.length,this.clusterProps.push(x)),n(x,this._map(a,P)))}a[h+G]=J,u.push(w/y,M/y,1/0,J,-1,y),n&&u.push(xe)}else{for(let w=0;w<d;w++)u.push(a[h+w]);if(y>1)for(const w of m){const M=w*d;if(!(a[M+E]<=s)){a[M+E]=s;for(let x=0;x<d;x++)u.push(a[M+x])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,s,r){if(e[s+O]>1){const o=this.clusterProps[e[s+we]];return r?Object.assign({},o):o}const i=this.points[e[s+$]].properties,n=this.options.map(i);return r&&n===i?Object.assign({},n):n}}function ve(t,e,s){return{type:"Feature",id:t[e+$],properties:Me(t,e,s),geometry:{type:"Point",coordinates:[He(t[e]),qe(t[e+1])]}}}function Me(t,e,s){const r=t[e+O],i=r>=1e4?`${Math.round(r/1e3)}k`:r>=1e3?`${Math.round(r/100)/10}k`:r,n=t[e+we],o=n===-1?{}:Object.assign({},s[n]);return Object.assign(o,{cluster:!0,cluster_id:t[e+$],point_count:r,point_count_abbreviated:i})}function I(t){return t/360+.5}function B(t){const e=Math.sin(t*Math.PI/180),s=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return s<0?0:s>1?1:s}function He(t){return(t-.5)*360}function qe(t){const e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function Ke(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}class b{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,s){this.isAdvancedMarker(e)?e.map=s:e.setMap(s)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}let V=class{constructor({markers:e,position:s}){this.markers=e,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const s of this.markers)e.extend(b.getPosition(s));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>b.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(b.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}};class Ye{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return Je(e)}}const Je=t=>t.map(s=>new V({position:b.getPosition(s),markers:[s]}));class be extends Ye{constructor(e){var{maxZoom:s,radius:r=60}=e,i=Ke(e,["maxZoom","radius"]);super({maxZoom:s}),this.state={zoom:-1},this.superCluster=new Ve(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){let s=!1;const r={zoom:e.map.getZoom()};if(!fe(e.markers,this.markers)){s=!0,this.markers=[...e.markers];const i=this.markers.map(n=>{const o=b.getPosition(n);return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng(),o.lat()]},properties:{marker:n}}});this.superCluster.load(i)}return s||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(s=!fe(this.state,r)),this.state=r,s&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:s}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(s=>this.transformCluster(s))}transformCluster({geometry:{coordinates:[e,s]},properties:r}){if(r.cluster)return new V({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(n=>n.properties.marker),position:{lat:s,lng:e}});const i=r.marker;return new V({markers:[i],position:b.getPosition(i)})}}class Xe{constructor(e,s){this.markers={sum:e.length};const r=s.map(n=>n.count),i=r.reduce((n,o)=>n+o,0);this.clusters={count:s.length,markers:{mean:i/s.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class Qe{render({count:e,position:s},r,i){const o=`<svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,l=`Cluster of ${e} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+e;if(b.isAdvancedMarkerAvailable(i)){const h=new DOMParser().parseFromString(o,"image/svg+xml").documentElement;h.setAttribute("transform","translate(0 25)");const p={map:i,position:s,zIndex:a,title:l,content:h};return new google.maps.marker.AdvancedMarkerElement(p)}const u={position:s,zIndex:a,title:l,icon:{url:`data:image/svg+xml;base64,${btoa(o)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}function et(t,e){for(let s in e.prototype)t.prototype[s]=e.prototype[s]}class H{constructor(){et(H,google.maps.OverlayView)}}var j;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(j||(j={}));const tt=(t,e,s)=>{s.fitBounds(e.bounds)};let st=class extends H{constructor({map:e,markers:s=[],algorithmOptions:r={},algorithm:i=new be(r),renderer:n=new Qe,onClusterClick:o=tt}){super(),this.markers=[...s],this.clusters=[],this.algorithm=i,this.renderer=n,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,s){this.markers.includes(e)||(this.markers.push(e),s||this.render())}addMarkers(e,s){e.forEach(r=>{this.addMarker(r,!0)}),s||this.render()}removeMarker(e,s){const r=this.markers.indexOf(e);return r===-1?!1:(b.setMap(e,null),this.markers.splice(r,1),s||this.render(),!0)}removeMarkers(e,s){let r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!s&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,j.CLUSTERING_BEGIN,this);const{clusters:s,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){const i=new Set;for(const o of s)o.markers.length==1&&i.add(o.markers[0]);const n=[];for(const o of this.clusters)o.marker!=null&&(o.markers.length==1?i.has(o.marker)||b.setMap(o.marker,null):n.push(o.marker));this.clusters=s,this.renderClusters(),requestAnimationFrame(()=>n.forEach(o=>b.setMap(o,null)))}google.maps.event.trigger(this,j.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>b.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new Xe(this.markers,this.clusters),s=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,s),r.markers.forEach(i=>b.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,j.CLUSTER_CLICK,r),this.onClusterClick(i,r,s)})),b.setMap(r.marker,s)})}};const q={maxZoom:{type:Number,twoWay:!1,default:16,noBind:!0}},rt=L({mappedProps:q,events:["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],name:"MarkerCluster",ctr:()=>st,ctrArgs:({map:t,maxZoom:e})=>[{map:t,markers:[],algorithm:new be({maxZoom:e})}],render(){return g.h("div",this.$slots.default())},afterCreate(t){const e=()=>{const s=t.getMarkers();t.clearMarkers(),t.addMarkers(s)};Object.keys(q).forEach(s=>{q[s].twoWay&&this.$on(`${s.toLowerCase()}_changed`,e)})},updated(){var t,e;this.$MarkerClusterObject&&((e=(t=this.$MarkerClusterObject).repaint)==null||e.call(t))},beforeDestroy(){this.$children.forEach(t=>{t.$MarkerClusterObject===this.$MarkerClusterObject&&(t.$MarkerClusterObject=null)}),this.$MarkerClusterObject&&this.$MarkerClusterObject.clearMarkers()}}),it=t=>{const e=t.addEventListener?t.addEventListener:t.attachEvent;function s(r,i){if(r==="keydown"){const n=i;i=function(l){const a=document.getElementsByClassName("pac-item-selected").length>0;if(l.which===13&&!a){const u=document.createEvent("Event");u.keyCode=40,u.which=40,n.apply(t,[u])}n.apply(t,[l])}}e.apply(t,[r,i])}t.addEventListener=s,t.attachEvent=s},K={bounds:{type:Object},componentRestrictions:{type:Object,noBind:!0},types:{type:Array,default:()=>[]}},nt={selectFirstOnEnter:{required:!1,type:Boolean,default:!1},childRefName:{required:!1,type:String,default:"input"},options:{type:Object},fields:{required:!1,type:Array,default:null}},ot={emits:["place_changed"],mounted(){this.$googleMapsApiPromiseLazy().then(()=>{let t=null;if(this.$slots.input&&(t=this.$slots.input()[0].context.$refs.input,t&&t.$refs&&(t=t.$refs[this.childRefName||"input"]),t&&(this.$refs.input=t)),this.selectFirstOnEnter&&it(this.$refs.input),typeof window>"u"||typeof window.google.maps.places.Autocomplete!="function")throw new Error("google.maps.places.Autocomplete is undefined. Did you add 'places' to libraries when loading Google Maps?");const e={...z(this,K),...this.options};typeof window<"u"&&(this.$autocomplete=new window.google.maps.places.Autocomplete(this.$refs.input,e),T(this,this.$autocomplete,K)),this.$watch("componentRestrictions",s=>{s!==void 0&&this.$autocomplete.setComponentRestrictions(s)}),this.fields&&this.$autocomplete.setFields(this.fields),this.$autocomplete.addListener("place_changed",()=>{this.$emit("place_changed",this.$autocomplete.getPlace())})})},props:{...R(K),...nt}},at={key:0};function lt(t,e,s,r,i,n){return t.$slots.input?(g.openBlock(),g.createElementBlock("span",at,[g.renderSlot(t.$slots,"input",g.mergeProps({attrs:t.$attrs},t.$attrs,{ref:t.input}))])):t.$slots.input?g.createCommentVNode("",!0):(g.openBlock(),g.createElementBlock("input",g.mergeProps({key:1,ref:"input"},t.$attrs),null,16))}const ke=Z(ot,[["render",lt]]),Ce=t=>{let e=!1,s;return()=>(e||(e=!0,s=t()),s)};function ct(t,e){return function(r){function i(){return e.googleMapsApi={},window.google}if(r.load)return Ce(()=>typeof window>"u"?new Promise(()=>{}).then(i):new Promise((o,l)=>{try{typeof window.googleMapsInit=="function"&&o(0),window.googleMapsInit=o,t(r.load,r.loadCn)}catch(a){l(a)}}).then(i));const n=new Promise(o=>{typeof window>"u"||(window.googleMapsInit=o)}).then(i);return Ce(()=>n)}}const $e=(()=>{let t=!1;return(e,s)=>{if(!(typeof document>"u")&&!(window&&typeof window.google=="object")){if(t)throw new Error("You already started the loading of google maps");{t=!0;const r=document.createElement("SCRIPT");if(typeof e!="object")throw new Error("options should  be an object");Object.prototype.isPrototypeOf.call(Array.prototype,e.libraries)&&(e.libraries=e.libraries.join(",")),e.callback="googleMapsInit";let i="https://maps.googleapis.com/";typeof s=="boolean"&&s===!0&&(i="https://maps.google.cn/");const n=Object.keys(e).map(l=>`${encodeURIComponent(l)}=${encodeURIComponent(e[l])}`).join("&"),o=`${i}maps/api/js?${n}`;r.setAttribute("src",o),r.setAttribute("async",""),r.setAttribute("defer",""),document.head.appendChild(r)}}}})();var ht={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ut=ht.BUILD_DEV==="1"?void 0:(t=>t.default||t)(Object.assign({"./components/cluster.ts":()=>Promise.resolve().then(()=>mt)}));let Y=null;function dt(t,e={installComponents:!1,autoBindAllEvents:!0}){Y=g.createApp({data(){return{googleMapsApi:null}}});const s=g.createApp(void 0),i=ct($e,Y)(e);t.mixin({created(){this.$googleMapsDefaultResizeBus=s,this.$googleMapsOptions=e,this.$googleMapsApiPromiseLazy=i}}),t.config.globalProperties.$googleMapsDefaultResizeBus=s,t.config.globalProperties.$googleMapsApiPromiseLazy=i,e.installComponents&&(t.component("GoogleMapsMap",le),t.component("GoogleMapsMarker",de),t.component("MarkerCluster",rt),t.component("GoogleMapsInfoWindow",ie),t.component("GoogleMapPolygon",he),t.component("GoogleMapsAutocomplete",ke))}function pt(){if(typeof window<"u")return Y.googleMapsApi&&window.google}function C(t,e){t.getMarkerClusterer().extend(C,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}C.prototype.onAdd=function(){var t=this,e,s;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){s=e}),google.maps.event.addDomListener(this.div_,"mousedown",function(){e=!0,s=!1}),google.maps.event.addDomListener(this.div_,"click",function(r){if(e=!1,!s){var i,n,o=t.cluster_.getMarkerClusterer();google.maps.event.trigger(o,"click",t.cluster_),google.maps.event.trigger(o,"clusterclick",t.cluster_),o.getZoomOnClick()&&(n=o.getMaxZoom(),i=t.cluster_.getBounds(),o.getMap().fitBounds(i),setTimeout(function(){o.getMap().fitBounds(i),n!==null&&o.getMap().getZoom()>n&&o.getMap().setZoom(n+1)},100)),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var r=t.cluster_.getMarkerClusterer();google.maps.event.trigger(r,"mouseover",t.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var r=t.cluster_.getMarkerClusterer();google.maps.event.trigger(r,"mouseout",t.cluster_)})},C.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},C.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},C.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},C.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),s=parseInt(e[0].replace(/^\s+|\s+$/g,""),10),r=parseInt(e[1].replace(/^\s+|\s+$/g,""),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),t="<img src='"+this.url_+"' style='position: absolute; top: "+r+"px; left: "+s+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*r+"px, "+(-1*s+this.width_)+"px, "+(-1*r+this.height_)+"px, "+-1*s+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",typeof this.sums_.title>"u"||this.sums_.title===""?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},C.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var s=this.styles_[e];this.url_=s.url,this.height_=s.height,this.width_=s.width,this.anchorText_=s.anchorText||[0,0],this.anchorIcon_=s.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=s.textColor||"black",this.textSize_=s.textSize||11,this.textDecoration_=s.textDecoration||"none",this.fontWeight_=s.fontWeight||"bold",this.fontStyle_=s.fontStyle||"normal",this.fontFamily_=s.fontFamily||"Arial,sans-serif",this.backgroundPosition_=s.backgroundPosition||"0 0"},C.prototype.setCenter=function(t){this.center_=t},C.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},C.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e};function k(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new C(this,t.getStyles())}k.prototype.getSize=function(){return this.markers_.length},k.prototype.getMarkers=function(){return this.markers_},k.prototype.getCenter=function(){return this.center_},k.prototype.getMap=function(){return this.map_},k.prototype.getMarkerClusterer=function(){return this.markerClusterer_},k.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),s=this.getMarkers();for(t=0;t<s.length;t++)e.extend(s[t].getPosition());return e},k.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},k.prototype.addMarker=function(t){var e,s,r;if(this.isMarkerAlreadyAdded_(t))return!1;if(!this.center_)this.center_=t.getPosition(),this.calculateBounds_();else if(this.averageCenter_){var i=this.markers_.length+1,n=(this.center_.lat()*(i-1)+t.getPosition().lat())/i,o=(this.center_.lng()*(i-1)+t.getPosition().lng())/i;this.center_=new google.maps.LatLng(n,o),this.calculateBounds_()}if(t.isAdded=!0,this.markers_.push(t),s=this.markers_.length,r=this.markerClusterer_.getMaxZoom(),r!==null&&this.map_.getZoom()>r)t.getMap()!==this.map_&&t.setMap(this.map_);else if(s<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(s===this.minClusterSize_)for(e=0;e<s;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},k.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},k.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},k.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(e!==null&&this.map_.getZoom()>e){this.clusterIcon_.hide();return}if(t<this.minClusterSize_){this.clusterIcon_.hide();return}var s=this.markerClusterer_.getStyles().length,r=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(r),this.clusterIcon_.show()},k.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return this.markers_.indexOf(t)!==-1;for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1};function c(t,e,s){this.extend(c,google.maps.OverlayView),e=e||[],s=s||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.title_=s.title||"",this.zoomOnClick_=!0,s.zoomOnClick!==void 0&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,s.averageCenter!==void 0&&(this.averageCenter_=s.averageCenter),this.ignoreHidden_=!1,s.ignoreHidden!==void 0&&(this.ignoreHidden_=s.ignoreHidden),this.enableRetinaIcons_=!1,s.enableRetinaIcons!==void 0&&(this.enableRetinaIcons_=s.enableRetinaIcons),this.imagePath_=s.imagePath||c.IMAGE_PATH,this.imageExtension_=s.imageExtension||c.IMAGE_EXTENSION,this.imageSizes_=s.imageSizes||c.IMAGE_SIZES,this.calculator_=s.calculator||c.CALCULATOR,this.batchSize_=s.batchSize||c.BATCH_SIZE,this.batchSizeIE_=s.batchSizeIE||c.BATCH_SIZE_IE,this.clusterClass_=s.clusterClass||"cluster",navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}c.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},c.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},c.prototype.draw=function(){},c.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},c.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),s=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)s.extend(e[t].getPosition());this.getMap().fitBounds(s)},c.prototype.getGridSize=function(){return this.gridSize_},c.prototype.setGridSize=function(t){this.gridSize_=t},c.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},c.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},c.prototype.getMaxZoom=function(){return this.maxZoom_},c.prototype.setMaxZoom=function(t){this.maxZoom_=t},c.prototype.getStyles=function(){return this.styles_},c.prototype.setStyles=function(t){this.styles_=t},c.prototype.getTitle=function(){return this.title_},c.prototype.setTitle=function(t){this.title_=t},c.prototype.getZoomOnClick=function(){return this.zoomOnClick_},c.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},c.prototype.getAverageCenter=function(){return this.averageCenter_},c.prototype.setAverageCenter=function(t){this.averageCenter_=t},c.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},c.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},c.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},c.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},c.prototype.getImageExtension=function(){return this.imageExtension_},c.prototype.setImageExtension=function(t){this.imageExtension_=t},c.prototype.getImagePath=function(){return this.imagePath_},c.prototype.setImagePath=function(t){this.imagePath_=t},c.prototype.getImageSizes=function(){return this.imageSizes_},c.prototype.setImageSizes=function(t){this.imageSizes_=t},c.prototype.getCalculator=function(){return this.calculator_},c.prototype.setCalculator=function(t){this.calculator_=t},c.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},c.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},c.prototype.getClusterClass=function(){return this.clusterClass_},c.prototype.setClusterClass=function(t){this.clusterClass_=t},c.prototype.getMarkers=function(){return this.markers_},c.prototype.getTotalMarkers=function(){return this.markers_.length},c.prototype.getClusters=function(){return this.clusters_},c.prototype.getTotalClusters=function(){return this.clusters_.length},c.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},c.prototype.addMarkers=function(t,e){var s;for(s in t)t.hasOwnProperty(s)&&this.pushMarkerTo_(t[s]);e||this.redraw_()},c.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},c.prototype.removeMarker=function(t,e){var s=this.removeMarker_(t);return!e&&s&&this.repaint(),s},c.prototype.removeMarkers=function(t,e){var s,r,i=!1;for(s=0;s<t.length;s++)r=this.removeMarker_(t[s]),i=i||r;return!e&&i&&this.repaint(),i},c.prototype.removeMarker_=function(t){var e,s=-1;if(this.markers_.indexOf)s=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){s=e;break}return s===-1?!1:(t.setMap(null),this.markers_.splice(s,1),!0)},c.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},c.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},c.prototype.getExtendedBounds=function(t){var e=this.getProjection(),s=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(s);i.x+=this.gridSize_,i.y-=this.gridSize_;var n=e.fromLatLngToDivPixel(r);n.x-=this.gridSize_,n.y+=this.gridSize_;var o=e.fromDivPixelToLatLng(i),l=e.fromDivPixelToLatLng(n);return t.extend(o),t.extend(l),t},c.prototype.redraw_=function(){this.createClusters_(0)},c.prototype.resetViewport_=function(t){var e,s;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)s=this.markers_[e],s.isAdded=!1,t&&s.setMap(null)},c.prototype.distanceBetweenPoints_=function(t,e){var s=6371,r=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),o=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),l=s*o;return l},c.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},c.prototype.addToClosestCluster_=function(t){var e,s,r,i,n=4e4,o=null;for(e=0;e<this.clusters_.length;e++)r=this.clusters_[e],i=r.getCenter(),i&&(s=this.distanceBetweenPoints_(i,t.getPosition()),s<n&&(n=s,o=r));o&&o.isMarkerInClusterBounds(t)?o.addMarker(t):(r=new k(this),r.addMarker(t),this.clusters_.push(r))},c.prototype.createClusters_=function(t){var e,s,r,i=this;if(this.ready_){t===0&&(google.maps.event.trigger(this,"clusteringbegin",this),typeof this.timerRefStatic<"u"&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),this.getMap().getZoom()>3?r=new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):r=new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var n=this.getExtendedBounds(r),o=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;e<o;e++)s=this.markers_[e],!s.isAdded&&this.isMarkerInBounds_(s,n)&&(!this.ignoreHidden_||this.ignoreHidden_&&s.getVisible())&&this.addToClosestCluster_(s);o<this.markers_.length?this.timerRefStatic=setTimeout(function(){i.createClusters_(o)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},c.prototype.extend=function(t,e){return(function(s){var r;for(r in s.prototype)this.prototype[r]=s.prototype[r];return this}).apply(t,[e])},c.CALCULATOR=function(t,e){for(var s=0,r="",i=t.length.toString(),n=i;n!==0;)n=parseInt(n/10,10),s++;return s=Math.min(s,e),{text:i,index:s,title:r}},c.BATCH_SIZE=2e3,c.BATCH_SIZE_IE=500,c.IMAGE_PATH="https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m",c.IMAGE_EXTENSION="png",c.IMAGE_SIZES=[53,56,66,78,90];var ft=c;const Oe=pe(ft),gt=L({mappedProps:{maxZoom:{type:Number,twoWay:!1},batchSizeIE:{type:Number,twoWay:!1},calculator:{type:Function,twoWay:!1},enableRetinaIcons:{type:Boolean,twoWay:!1},gridSize:{type:Number,twoWay:!1},averageCenter:{type:Boolean,twoWay:!1},ignoreHidden:{type:Boolean,twoWay:!1},imageExtension:{type:String,twoWay:!1},imagePath:{type:String,twoWay:!1},imageSizes:{type:Array,twoWay:!1},minimumClusterSize:{type:Number,twoWay:!1},styles:{type:Array,twoWay:!1},zoomOnClick:{type:Boolean,twoWay:!1}},events:["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],name:"cluster",ctr:()=>{if(typeof Oe>"u")throw console.error("MarkerClusterer is not installed! require() it or include it from https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer.js"),new Error("MarkerClusterer is not installed! require() it or include it from https://cdnjs.cloudflare.com/ajax/libs/js-marker-clusterer/1.0.0/markerclusterer.js");return Oe},ctrArgs:({map:t,...e})=>[t,[],e],render(t){return t("div",null,{default:this.$slots.default})},updated(){this.$clusterObject&&this.$clusterObject.repaint()},beforeDestroy(){this.$children.forEach(t=>{t.$clusterObject===this.$clusterObject&&(t.$clusterObject=null)}),this.$clusterObject&&this.$clusterObject.clearMarkers()}}),mt=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"}));v.Autocomplete=ke,v.Cluster=ut,v.InfoWindow=ie,v.Map=le,v.MapElementFactory=L,v.MapElementMixin=se,v.Marker=de,v.MountableMixin=ne,v.Polygon=he,v.default=dt,v.googleMapsApi=pt,v.loadGoogleMapsApi=$e,Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
